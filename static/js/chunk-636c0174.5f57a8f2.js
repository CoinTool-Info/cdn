(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-636c0174"],{"04f0":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleSumTree=e.ProofStep=e.Leaf=e.Bucket=void 0;const r=i("13ca");class s{constructor(t,e){this.size=BigInt(t),this.hashed=e,this.parent=null,this.left=null,this.right=null}}e.Bucket=s;e.Leaf=class{constructor(t,e,i){this.hashFn=t,this.rng=e.map((t=>BigInt(t))),this.data=i}getBucket(){let e;return e=this.data?this.hashFn(this.data):t.alloc(32),new s(BigInt(this.rng[1])-BigInt(this.rng[0]),e)}};class n{constructor(t,e){this.bucket=t,this.right=e}}e.ProofStep=n;class h extends r.Base{constructor(e,i){super(),this.leaves=e,this.hashFn=i,h.checkConsecutive(e),this.buckets=[];for(const t of e)this.buckets.push(t.getBucket());let r=[];for(const t of this.buckets)r.push(t);for(;1!==r.length;){const e=[];for(;r.length;)if(r.length>=2){const i=r.shift(),n=r.shift(),h=i.size+n.size,o=this.hashFn(t.concat([this.sizeToBuffer(i.size),this.bufferify(i.hashed),this.sizeToBuffer(n.size),this.bufferify(n.hashed)])),a=new s(h,o);n.parent=a,i.parent=n.parent,i.right=n,n.left=i,e.push(a)}else e.push(r.shift());r=e}this.root=r[0]}sizeToBuffer(e){const i=t.alloc(8);return new DataView(i.buffer).setBigInt64(0,BigInt(e),!1),i}static checkConsecutive(t){let e=BigInt(0);for(const i of t){if(i.rng[0]!==e)throw new Error("leaf ranges are invalid");e=BigInt(i.rng[1])}}getProof(t){let e=this.buckets[Number(t)];const i=[];for(;e&&e.parent;){const t=!!e.right,r=e.right?e.right:e.left;e=e.parent,i.push(new n(r,t))}return i}sum(t){let e=BigInt(0);for(const i of t)e+=BigInt(i);return e}verifyProof(e,i,r){const n=[this.sum(r.filter((t=>!t.right)).map((t=>t.bucket.size))),BigInt(e.size)-this.sum(r.filter((t=>t.right)).map((t=>t.bucket.size)))];if(n[0]!==i.rng[0]||n[1]!==i.rng[1])return!1;let h,o=i.getBucket();for(const e of r)h=e.right?this.hashFn(t.concat([this.sizeToBuffer(o.size),this.bufferify(o.hashed),this.sizeToBuffer(e.bucket.size),this.bufferify(e.bucket.hashed)])):this.hashFn(t.concat([this.sizeToBuffer(e.bucket.size),this.bufferify(e.bucket.hashed),this.sizeToBuffer(o.size),this.bufferify(o.hashed)])),o=new s(BigInt(o.size)+BigInt(e.bucket.size),h);return o.size===e.size&&o.hashed.toString("hex")===e.hashed.toString("hex")}}e.MerkleSumTree=h,"undefined"!=typeof window&&(window.MerkleSumTree=h),e.default=h}).call(this,i("1c35").Buffer)},"13ca":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;const s=i("1c35"),n=r(i("3452"));class h{print(){h.print(this)}bufferIndexOf(t,e,i=!1){if(i)return this.binarySearch(t,e,s.Buffer.compare);return this.linearSearch(t,e,((t,e)=>t.equals(e)))}static binarySearch(t,e,i){let r=0,s=t.length-1;for(;r<=s;){const n=Math.floor((r+s)/2),h=i(t[n],e);if(0===h){for(let r=n-1;r>=0;r--)if(0!==i(t[r],e))return r+1;return 0}h<0?r=n+1:s=n-1}return-1}binarySearch(t,e,i){return h.binarySearch(t,e,i)}static linearSearch(t,e,i){for(let r=0;r<t.length;r++)if(i(t[r],e))return r;return-1}linearSearch(t,e,i){return h.linearSearch(t,e,i)}static bufferify(t){if(!s.Buffer.isBuffer(t)){if("object"==typeof t&&t.words)return s.Buffer.from(t.toString(n.default.enc.Hex),"hex");if(h.isHexString(t))return s.Buffer.from(t.replace(/^0x/,""),"hex");if("string"==typeof t)return s.Buffer.from(t);if("bigint"==typeof t)return s.Buffer.from(t.toString(16),"hex");if(t instanceof Uint8Array)return s.Buffer.from(t.buffer);if("number"==typeof t){let e=t.toString();return e.length%2&&(e="0"+e),s.Buffer.from(e,"hex")}if(ArrayBuffer.isView(t))return s.Buffer.from(t.buffer,t.byteOffset,t.byteLength)}return t}bigNumberify(t){return h.bigNumberify(t)}static bigNumberify(t){if("bigint"==typeof t)return t;if("string"==typeof t)return t.startsWith("0x")&&h.isHexString(t)?BigInt("0x"+t.replace("0x","").toString()):BigInt(t);if(s.Buffer.isBuffer(t))return BigInt("0x"+t.toString("hex"));if(t instanceof Uint8Array)return BigInt(t);if("number"==typeof t)return BigInt(t);throw new Error("cannot bigNumberify")}static isHexString(t){return"string"==typeof t&&/^(0x)?[0-9A-Fa-f]*$/.test(t)}static print(t){}bufferToHex(t,e=!0){return h.bufferToHex(t,e)}static bufferToHex(t,e=!0){return`${e?"0x":""}${(t||s.Buffer.alloc(0)).toString("hex")}`}bufferify(t){return h.bufferify(t)}bufferifyFn(t){return e=>{const i=t(e);return s.Buffer.isBuffer(i)?i:this.isHexString(i)?s.Buffer.from(i.replace("0x",""),"hex"):"string"==typeof i?s.Buffer.from(i):"bigint"==typeof i?s.Buffer.from(e.toString(16),"hex"):ArrayBuffer.isView(i)?s.Buffer.from(i.buffer,i.byteOffset,i.byteLength):s.Buffer.from(t(n.default.enc.Hex.parse(e.toString("hex"))).toString(n.default.enc.Hex),"hex")}}isHexString(t){return h.isHexString(t)}log2(t){return 1===t?0:1+this.log2(t/2|0)}zip(t,e){return t.map(((t,i)=>[t,e[i]]))}static hexZeroPad(t,e){return"0x"+t.replace("0x","").padStart(e,"0")}}e.Base=h,e.default=h},"26bf":function(t,e,i){t.exports=function(){function t(t,e){var i=e?"└":"├";return i+=t?"─ ":"──┐"}function e(t,e){var i=[];for(var r in t)t.hasOwnProperty(r)&&(e&&"function"==typeof t[r]||i.push(r));return i}function i(r,s,n,h,o,a,u){var f,l,d="",c=0,m=h.slice(0);if(m.push([s,n])&&h.length>0&&(h.forEach((function(t,e){e>0&&(d+=(t[1]?" ":"│")+"  "),l||t[0]!==s||(l=!0)})),d+=t(r,n)+r,o&&("object"!=typeof s||s instanceof Date)&&(d+=": "+s),l&&(d+=" (circular ref.)"),u(d)),!l&&"object"==typeof s){var p=e(s,a);p.forEach((function(t){f=++c===p.length,i(t,s[t],f,m,o,a,u)}))}}var r={asLines:function(t,e,r,s){i(".",t,!1,[],e,"function"!=typeof r&&r,s||r)},asTree:function(t,e,r){var s="";return i(".",t,!1,[],e,r,(function(t){s+=t+"\n"})),s}};return r}()},6249:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const s=r(i("a43f")),n=r(i("1c35")),h=r(i("6983")),o=n.default.Buffer;function a(t){return t=function(t){if(!o.isBuffer(t))if(Array.isArray(t))t=o.from(t);else if("string"==typeof t)t=function(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}(t)?o.from(u(function(t){return"string"!=typeof t?t:function(t){if("string"!=typeof t)throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}(t)?t.slice(2):t}(t)),"hex"):o.from(t);else if("number"==typeof t)t=function(t){const e=function(t){const e=t.toString(16);return"0x"+e}(t);return o.from(u(e.slice(2)),"hex")}(t);else if(null==t)t=o.allocUnsafe(0);else if(s.default.isBN(t))t=t.toArrayLike(o);else{if(!t.toArray)throw new Error("invalid type");t=o.from(t.toArray())}return t}(t),(0,h.default)("keccak256").update(t).digest()}function u(t){if("string"!=typeof t)throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t="0"+t),t}"undefined"!=typeof window&&(window.keccak256=a),t.exports=a},"655a":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.IncrementalMerkleTree=void 0;const s=r(i("13ca")),n=r(i("26bf"));class h extends s.default{constructor(t,e){if(super(),this.hashFn=t,e.depth&&(this.depth=e.depth),e.arity&&(this.arity=e.arity),this.depth<1)throw new Error("depth must be greater than 0");if(this.arity<1)throw new Error("arity must be greater than 0");const i=[];let r=e.zeroValue;if(this.zeroValue=r,this.zeroes=[],this.depth)for(let t=0;t<this.depth;t++)this.zeroes.push(r),i[t]=[],r=this.hashFn(Array(this.arity).fill(r));this.nodes=i,this.root=r}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.bufferify(this.getRoot()))}insert(t){if(this.depth&&this.arity&&this.nodes[0].length>=this.getMaxLeaves())throw new Error("tree is full");let e=t,i=this.nodes[0].length;for(let t=0;t<this.depth;t+=1){const r=i-i%this.arity,s=r+this.arity,n=[];this.nodes[t][i]=e;for(let e=r;e<s;e+=1)e<this.nodes[t].length?n.push(this.nodes[t][e]):n.push(this.zeroes[t]);e=this.hashFn(n),i=Math.floor(i/this.arity)}this.root=e}delete(t){this.update(t,this.zeroValue)}update(t,e){if(t<0||t>=this.nodes[0].length)throw new Error("out of bounds");let i=e;for(let e=0;e<this.depth;e+=1){const r=t-t%this.arity,s=r+this.arity,n=[];this.nodes[e][t]=i;for(let t=r;t<s;t+=1)t<this.nodes[e].length?n.push(this.nodes[e][t]):n.push(this.zeroes[e]);i=this.hashFn(n),t=Math.floor(t/this.arity)}this.root=i}getDepth(){return this.depth}getArity(){return this.arity}getMaxLeaves(){return Math.pow(this.depth,this.arity)}indexOf(t){return this.nodes[0].indexOf(t)}getLeaves(){const t=this.copyList(this.nodes[0]);for(let e=this.nodes[0].length;e<this.getMaxLeaves();e++)t[e]=this.zeroValue;return t}copyList(t){return t.map((t=>BigInt(t)))}getLayers(){const t=[];for(const e of this.nodes)t.push(this.copyList(e));if(t[0].length<this.getMaxLeaves()){let e=t[0].length;for(let i=e;i<this.getMaxLeaves();i++)t[0][i]=this.zeroValue;for(let i=0;i<this.depth;i++){const r=e-e%this.arity,s=r+this.arity;for(let e=r;e<s;e++)e>=t[i].length&&(t[i][e]=this.zeroes[i]);e=Math.floor(e/this.arity)}}return t.push([this.root]),t}getHexLayers(){return this.getLayers().reduce(((t,e)=>(Array.isArray(e)?t.push(e.map((t=>this.bufferToHex(this.bufferify(t))))):t.push(e),t)),[])}getLayersAsObject(){const t=this.getLayers().map((t=>t.map((t=>this.bufferToHex(this.bufferify(t),!1))))),e=[];for(let i=0;i<t.length;i++){const r=[];for(let s=0;s<t[i].length;s++){const n={[t[i][s]]:null};if(e.length){n[t[i][s]]={};const r=e.shift(),h=Object.keys(r)[0];if(n[t[i][s]][h]=r[h],e.length){const r=e.shift(),h=Object.keys(r)[0];n[t[i][s]][h]=r[h]}}r.push(n)}e.push(...r)}return e[0]}computeRoot(){let t,e=this.nodes[0].length;for(let i=0;i<this.depth;i+=1){const r=e-e%this.arity,s=r+this.arity,n=[];for(let t=r;t<s;t+=1)t<this.nodes[i].length?n.push(this.nodes[i][t]):n.push(this.zeroes[i]);t=this.hashFn(n),e=Math.floor(e/this.arity)}return t}getProof(t){if(t<0||t>=this.nodes[0].length)throw new Error("The leaf does not exist in this tree");const e=[],i=[],r=t;for(let r=0;r<this.depth;r+=1){const s=t%this.arity,n=t-s,h=n+this.arity;i[r]=s,e[r]=[];for(let i=n;i<h;i+=1)i!==t&&(i<this.nodes[r].length?e[r].push(this.nodes[r][i]):e[r].push(this.zeroes[r]));t=Math.floor(t/this.arity)}return{root:this.root,leaf:this.nodes[0][r],pathIndices:i,siblings:e}}verify(t){let e=t.leaf;for(let i=0;i<t.siblings.length;i+=1){const r=t.siblings[i].slice();r.splice(t.pathIndices[i],0,e),e=this.hashFn(r)}return t.root===e}toString(){return this.toTreeString()}toTreeString(){const t=this.getLayersAsObject();return n.default.asTree(t,!0)}}e.IncrementalMerkleTree=h,"undefined"!=typeof window&&(window.IncrementalMerkleTree=h),e.default=h},"6d46":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleTree=void 0;const s=i("1c35"),n=r(i("feaa")),h=r(i("94f8")),o=r(i("26bf")),a=r(i("13ca"));class u extends a.default{constructor(t,e=h.default,i={}){if(super(),this.duplicateOdd=!1,this.concatenator=s.Buffer.concat,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.complete=!1,i.complete){if(i.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(i.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}if(this.isBitcoinTree=!!i.isBitcoinTree,this.hashLeaves=!!i.hashLeaves,this.sortLeaves=!!i.sortLeaves,this.sortPairs=!!i.sortPairs,this.complete=!!i.complete,i.fillDefaultHash)if("function"==typeof i.fillDefaultHash)this.fillDefaultHash=i.fillDefaultHash;else{if(!s.Buffer.isBuffer(i.fillDefaultHash)&&"string"!=typeof i.fillDefaultHash)throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');this.fillDefaultHash=(t,e)=>i.fillDefaultHash}this.sort=!!i.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!i.duplicateOdd,i.concatenator&&(this.concatenator=i.concatenator),this.hashFn=this.bufferifyFn(e),this.processLeaves(t)}getOptions(){var t,e;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:null!==(e=null===(t=this.fillDefaultHash)||void 0===t?void 0:t.toString())&&void 0!==e?e:null,duplicateOdd:this.duplicateOdd}}processLeaves(t){if(this.hashLeaves&&(t=t.map(this.hashFn)),this.leaves=t.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(s.Buffer.compare)),this.fillDefaultHash)for(let t=this.leaves.length;t<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));t++)this.leaves.push(this.bufferify(this.fillDefaultHash(t,this.hashFn)));this.createHashes(this.leaves)}createHashes(t){for(this.layers=[t];t.length>1;){const e=this.layers.length;this.layers.push([]);const i=this.complete&&1===e&&!Number.isInteger(Math.log2(t.length))?2*t.length-Math.pow(2,Math.ceil(Math.log2(t.length))):t.length;for(let r=0;r<t.length;r+=2){if(r>=i){this.layers[e].push(...t.slice(i));break}if(r+1===t.length&&t.length%2==1){const i=t[t.length-1];let s=i;if(this.isBitcoinTree){s=this.hashFn(this.concatenator([n.default(i),n.default(i)])),s=n.default(this.hashFn(s)),this.layers[e].push(s);continue}if(!this.duplicateOdd){this.layers[e].push(t[r]);continue}}const h=t[r],o=r+1===t.length?h:t[r+1];let a=null;a=this.isBitcoinTree?[n.default(h),n.default(o)]:[h,o],this.sortPairs&&a.sort(s.Buffer.compare);let u=this.hashFn(this.concatenator(a));this.isBitcoinTree&&(u=n.default(this.hashFn(u))),this.layers[e].push(u)}t=this.layers[e]}}addLeaf(t,e=!1){e&&(t=this.hashFn(t)),this.processLeaves(this.leaves.concat(t))}addLeaves(t,e=!1){e&&(t=t.map(this.hashFn)),this.processLeaves(this.leaves.concat(t))}getLeaves(t){return Array.isArray(t)?(this.hashLeaves&&(t=t.map(this.hashFn),this.sortLeaves&&(t=t.sort(s.Buffer.compare))),this.leaves.filter((e=>-1!==this.bufferIndexOf(t,e,this.sortLeaves)))):this.leaves}getLeaf(t){return t<0||t>this.leaves.length-1?s.Buffer.from([]):this.leaves[t]}getLeafIndex(t){t=this.bufferify(t);const e=this.getLeaves();for(let i=0;i<e.length;i++){if(e[i].equals(t))return i}return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map((t=>this.bufferToHex(t)))}static marshalLeaves(t){return JSON.stringify(t.map((t=>u.bufferToHex(t))),null,2)}static unmarshalLeaves(t){let e=null;if("string"==typeof t)e=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");e=t}if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(u.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce(((t,e)=>(Array.isArray(e)?t.push(e.map((t=>this.bufferToHex(t)))):t.push(e),t)),[])}getLayersFlat(){const t=this.layers.reduce(((t,e)=>(Array.isArray(e)?t.unshift(...e):t.unshift(e),t)),[]);return t.unshift(s.Buffer.from([0])),t}getHexLayersFlat(){return this.getLayersFlat().map((t=>this.bufferToHex(t)))}getLayerCount(){return this.getLayers().length}getRoot(){return 0===this.layers.length?s.Buffer.from([]):this.layers[this.layers.length-1][0]||s.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(t,e){if(void 0===t)throw new Error("leaf is required");t=this.bufferify(t);const i=[];if(!Number.isInteger(e)){e=-1;for(let i=0;i<this.leaves.length;i++)0===s.Buffer.compare(t,this.leaves[i])&&(e=i)}if(e<=-1)return[];for(let t=0;t<this.layers.length;t++){const r=this.layers[t],s=e%2,n=s?e-1:this.isBitcoinTree&&e===r.length-1&&t<this.layers.length-1?e:e+1;n<r.length&&i.push({position:s?"left":"right",data:r[n]}),e=e/2|0}return i}getHexProof(t,e){return this.getProof(t,e).map((t=>this.bufferToHex(t.data)))}getProofs(){const t=[];return this.getProofsDFS(this.layers.length-1,0,[],t),t}getProofsDFS(t,e,i,r){const s=e%2;if(-1===t)return void(s||r.push([...i].reverse()));if(e>=this.layers[t].length)return;const n=this.layers[t],h=s?e-1:e+1;let o=!1;h<n.length&&(o=!0,i.push({position:s?"left":"right",data:n[h]}));const a=2*e,u=2*e+1;this.getProofsDFS(t-1,a,i,r),this.getProofsDFS(t-1,u,i,r),o&&i.splice(i.length-1,1)}getHexProofs(){return this.getProofs().map((t=>this.bufferToHex(t.data)))}getPositionalHexProof(t,e){return this.getProof(t,e).map((t=>["left"===t.position?0:1,this.bufferToHex(t.data)]))}static marshalProof(t){const e=t.map((t=>"string"==typeof t?t:s.Buffer.isBuffer(t)?u.bufferToHex(t):{position:t.position,data:u.bufferToHex(t.data)}));return JSON.stringify(e,null,2)}static unmarshalProof(t){let e=null;if("string"==typeof t)e=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");e=t}if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map((t=>{if("string"==typeof t)return u.bufferify(t);if(t instanceof Object)return{position:t.position,data:u.bufferify(t.data)};throw new Error("Expected item to be of type string or object")}))}static marshalTree(t){const e=t.getHexRoot(),i=t.leaves.map((t=>u.bufferToHex(t))),r=t.getHexLayers(),s=t.getOptions();return JSON.stringify({options:s,root:e,layers:r,leaves:i},null,2)}static unmarshalTree(t,e=h.default,i={}){let r=null;if("string"==typeof t)r=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");r=t}if(!r)throw new Error("could not parse json");return i=Object.assign({},r.options||{},i),new u(r.leaves,e,i)}getProofIndices(t,e){const i=Math.pow(2,e);let r=new Set;for(const e of t){let t=i+e;for(;t>1;)r.add(1^t),t=t/2|0}const s=t.map((t=>i+t)),n=Array.from(r).sort(((t,e)=>t-e)).reverse();r=s.concat(n);const h=new Set,o=[];for(let t of r)if(!h.has(t))for(o.push(t);t>1&&(h.add(t),h.has(1^t));)t=t/2|0;return o.filter((e=>!t.includes(e-i)))}getProofIndicesForUnevenTree(t,e){const i=Math.ceil(Math.log2(e)),r=[];for(let t=0;t<i;t++){e%2!=0&&r.push({index:t,leavesCount:e}),e=Math.ceil(e/2)}const s=[];let n=t;for(let t=0;t<i;t++){let e=n.map((t=>t%2==0?t+1:t-1)).filter((t=>!n.includes(t)));const i=r.find((({index:e})=>e===t));i&&n.includes(i.leavesCount-1)&&(e=e.slice(0,-1)),s.push(e),n=[...new Set(n.map((t=>t%2==0?t/2:t%2==0?(t+1)/2:(t-1)/2)))]}return s}getMultiProof(t,e){this.complete,e||(e=t,t=this.getLayersFlat());if(this.isUnevenTree()&&e.every(Number.isInteger))return this.getMultiProofForUnevenTree(e);if(!e.every(Number.isInteger)){let t=e;this.sortPairs&&(t=t.sort(s.Buffer.compare));let i=t.map((t=>this.bufferIndexOf(this.leaves,t,this.sortLeaves))).sort(((t,e)=>t===e?0:t>e?1:-1));if(!i.every((t=>-1!==t)))throw new Error("Element does not exist in Merkle tree");const r=[],n=[];let h=[];for(let t=0;t<this.layers.length;t++){const e=this.layers[t];for(let t=0;t<i.length;t++){const s=i[t],o=this.getPairNode(e,s);r.push(e[s]),o&&n.push(o),h.push(s/2|0)}i=h.filter(((t,e,i)=>i.indexOf(t)===e)),h=[]}return n.filter((t=>!r.includes(t)))}return this.getProofIndices(e,Math.log2(t.length/2|0)).map((e=>t[e]))}getMultiProofForUnevenTree(t,e){e||(e=t,t=this.getLayers());let i=[],r=e;for(const e of t){const t=[];for(const i of r){if(i%2==0){const s=i+1;if(!r.includes(s)&&e[s]){t.push(e[s]);continue}}const s=i-1;r.includes(s)||!e[s]||t.push(e[s])}i=i.concat(t);const s=new Set;for(const t of r)t%2!=0?t%2!=0?s.add((t-1)/2):s.add((t+1)/2):s.add(t/2);r=Array.from(s)}return i}getHexMultiProof(t,e){return this.getMultiProof(t,e).map((t=>this.bufferToHex(t)))}getProofFlags(t,e){if(!Array.isArray(t)||t.length<=0)throw new Error("Invalid Inputs!");let i;if(i=t.every(Number.isInteger)?[...t].sort(((t,e)=>t===e?0:t>e?1:-1)):t.map((t=>this.bufferIndexOf(this.leaves,t,this.sortLeaves))).sort(((t,e)=>t===e?0:t>e?1:-1)),!i.every((t=>-1!==t)))throw new Error("Element does not exist in Merkle tree");const r=e.map((t=>this.bufferify(t))),s=[],n=[];for(let t=0;t<this.layers.length;t++){const e=this.layers[t];i=i.reduce(((t,i)=>{if(!s.includes(e[i])){const t=this.getPairNode(e,i),h=r.includes(e[i])||r.includes(t);t&&n.push(!h),s.push(e[i]),s.push(t)}return t.push(i/2|0),t}),[])}return n}verify(t,e,i){let r=this.bufferify(e);if(i=this.bufferify(i),!Array.isArray(t)||!e||!i)return!1;for(let e=0;e<t.length;e++){const i=t[e];let h=null,o=null;if("string"==typeof i)h=this.bufferify(i),o=!0;else if(Array.isArray(i))o=0===i[0],h=this.bufferify(i[1]);else if(s.Buffer.isBuffer(i))h=i,o=!0;else{if(!(i instanceof Object))throw new Error("Expected node to be of type string or object");h=this.bufferify(i.data),o="left"===i.position}const a=[];this.isBitcoinTree?(a.push(n.default(r)),a[o?"unshift":"push"](n.default(h)),r=this.hashFn(this.concatenator(a)),r=n.default(this.hashFn(r))):this.sortPairs?-1===s.Buffer.compare(r,h)?(a.push(r,h),r=this.hashFn(this.concatenator(a))):(a.push(h,r),r=this.hashFn(this.concatenator(a))):(a.push(r),a[o?"unshift":"push"](h),r=this.hashFn(this.concatenator(a)))}return 0===s.Buffer.compare(r,i)}verifyMultiProof(t,e,i,r,n){if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(t,e,i,r,n);const h=Math.ceil(Math.log2(r));t=this.bufferify(t),i=i.map((t=>this.bufferify(t))),n=n.map((t=>this.bufferify(t)));const o={};for(const[t,r]of this.zip(e,i))o[Math.pow(2,h)+t]=r;for(const[t,i]of this.zip(this.getProofIndices(e,h),n))o[t]=i;let a=Object.keys(o).map((t=>+t)).sort(((t,e)=>t-e));a=a.slice(0,a.length-1);let u=0;for(;u<a.length;){const t=a[u];if(t>=2&&{}.hasOwnProperty.call(o,1^t)){let e=[o[t-t%2],o[t-t%2+1]];this.sortPairs&&(e=e.sort(s.Buffer.compare));const i=e[1]?this.hashFn(this.concatenator(e)):e[0];o[t/2|0]=i,a.push(t/2|0)}u+=1}return!e.length||{}.hasOwnProperty.call(o,1)&&o[1].equals(t)}verifyMultiProofWithFlags(t,e,i,r){t=this.bufferify(t),e=e.map(this.bufferify),i=i.map(this.bufferify);const n=e.length,h=r.length,o=[];let a=0,u=0,f=0;for(let t=0;t<h;t++){const h=[r[t]?a<n?e[a++]:o[u++]:i[f++],a<n?e[a++]:o[u++]].sort(s.Buffer.compare);o[t]=this.hashFn(this.concatenator(h))}return 0===s.Buffer.compare(o[h-1],t)}verifyMultiProofForUnevenTree(t,e,i,r,s){t=this.bufferify(t),i=i.map((t=>this.bufferify(t))),s=s.map((t=>this.bufferify(t)));const n=this.calculateRootForUnevenTree(e,i,r,s);return t.equals(n)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const t=this.getLayers().map((t=>t.map((t=>this.bufferToHex(t,!1))))),e=[];for(let i=0;i<t.length;i++){const r=[];for(let s=0;s<t[i].length;s++){const n={[t[i][s]]:null};if(e.length){n[t[i][s]]={};const r=e.shift(),h=Object.keys(r)[0];if(n[t[i][s]][h]=r[h],e.length){const r=e.shift(),h=Object.keys(r)[0];n[t[i][s]][h]=r[h]}}r.push(n)}e.push(...r)}return e[0]}static verify(t,e,i,r=h.default,s={}){return new u([],r,s).verify(t,e,i)}static getMultiProof(t,e){return new u([]).getMultiProof(t,e)}resetTree(){this.leaves=[],this.layers=[]}getPairNode(t,e){const i=e%2==0?e+1:e-1;return i<t.length?t[i]:null}toTreeString(){const t=this.getLayersAsObject();return o.default.asTree(t,!0)}toString(){return this.toTreeString()}isUnevenTree(t){const e=(null==t?void 0:t.length)||this.getDepth();return!this.isPowOf2(e)}isPowOf2(t){return t&&!(t&t-1)}calculateRootForUnevenTree(t,e,i,r){const s=this.zip(t,e).sort((([t],[e])=>t-e)),n=s.map((([t])=>t)),h=this.getProofIndicesForUnevenTree(n,i);let o=0;const a=[];for(let t=0;t<h.length;t++){const e=h[t],i=o;o+=e.length,a[t]=this.zip(e,r.slice(i,o))}const u=[s];for(let t=0;t<a.length;t++){const e=a[t].concat(u[t]).sort((([t],[e])=>t-e)).map((([,t])=>t)),i=u[t].map((([t])=>t)),r=[...new Set(i.map((t=>t%2==0?t/2:t%2==0?(t+1)/2:(t-1)/2)))],s=[];for(let t=0;t<r.length;t++){const i=r[t],n=e[2*t],h=e[2*t+1],o=h?this.hashFn(this.concatenator([n,h])):n;s.push([i,o])}u.push(s)}return u[u.length-1][0][1]}}e.MerkleTree=u,"undefined"!=typeof window&&(window.MerkleTree=u),e.default=u},a43f:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var h;"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(33).Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function u(t,e,i,s){for(var n=0,h=0,o=Math.min(t.length,i),a=e;a<o;a++){var u=t.charCodeAt(a)-48;n*=s,h=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&h<s,"Invalid character"),n+=h}return n}function f(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var s=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<t.length&&(16===e?this._parseHex(t,s,i):(this._parseBase(t,e,s),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var n,h,o=0;if("be"===i)for(s=t.length-1,n=0;s>=0;s-=3)h=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(s=0,n=0;s<t.length;s+=3)h=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this._strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,h=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[h]|=67108863&s,n>=18?(n-=18,h+=1,this.words[h]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[h]|=67108863&s,n>=18?(n-=18,h+=1,this.words[h]|=s>>>26):n+=8;this._strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,h=n%r,o=Math.min(n,n-h)+i,a=0,f=i;f<o;f+=r)a=u(t,f,f+r,e),this.imuln(s),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==h){var l=1;for(a=u(t,f,t.length,e),f=0;f<h;f++)l*=e;this.imuln(l),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){f(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){n.prototype.inspect=l}else n.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var s=0,n=0,h=0;h<this.length;h++){var o=this.words[h],a=(16777215&(o<<s|n)).toString(16);n=o>>>24-s&16777215,(s+=2)>=26&&(s-=26,h--),i=0!==n||h!==this.length-1?d[6-a.length]+a+i:a+i}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var u=c[t],f=m[t];i="";var l=this.clone();for(l.negative=0;!l.isZero();){var p=l.modrn(f).toString(t);i=(l=l.idivn(f)).isZero()?p+i:d[u-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},h&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],h=s*n,o=67108863&h,a=h/67108864|0;i.words[0]=o;for(var u=1;u<r;u++){for(var f=a>>>26,l=67108863&a,d=Math.min(u,e.length-1),c=Math.max(0,u-t.length+1);c<=d;c++){var m=u-c|0;f+=(h=(s=0|t.words[m])*(n=0|e.words[c])+l)/67108864|0,l=67108863&h}i.words[u]=0|l,a=0|f}return 0!==a?i.words[u]=0|a:i.length--,i._strip()}n.prototype.toArrayLike=function(t,e,i){this._strip();var s=this.byteLength(),n=i||Math.max(1,s);r(s<=n,"byte array longer than desired length"),r(n>0,"Requested array length <= 0");var h=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,n);return this["_toArrayLike"+("le"===e?"LE":"BE")](h,s),h},n.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var h=this.words[s]<<n|r;t[i++]=255&h,i<t.length&&(t[i++]=h>>8&255),i<t.length&&(t[i++]=h>>16&255),6===n?(i<t.length&&(t[i++]=h>>24&255),r=0,n=0):(r=h>>>24,n+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},n.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,s=0,n=0;s<this.length;s++){var h=this.words[s]<<n|r;t[i--]=255&h,i>=0&&(t[i--]=h>>8&255),i>=0&&(t[i--]=h>>16&255),6===n?(i>=0&&(t[i--]=h>>24&255),r=0,n=0):(r=h>>>24,n+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return!(8191&e)&&(i+=13,e>>>=13),!(127&e)&&(i+=7,e>>>=7),!(15&e)&&(i+=4,e>>>=4),!(3&e)&&(i+=2,e>>>=2),!(1&e)&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return r(!(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return r(!(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return r(!(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var s=0;s<e;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,s=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<s:this.words[i]&~(1<<s),this._strip()},n.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,h=0;h<r.length;h++)n=(e=(0|i.words[h])-(0|r.words[h])+n)>>26,this.words[h]=67108863&e;for(;0!==n&&h<i.length;h++)n=(e=(0|i.words[h])+n)>>26,this.words[h]=67108863&e;if(0===n&&h<i.length&&i!==this)for(;h<i.length;h++)this.words[h]=i.words[h];return this.length=Math.max(this.length,h),i!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var r,s,n,h=t.words,o=e.words,a=i.words,u=0,f=0|h[0],l=8191&f,d=f>>>13,c=0|h[1],m=8191&c,p=c>>>13,g=0|h[2],v=8191&g,y=g>>>13,M=0|h[3],w=8191&M,b=M>>>13,_=0|h[4],x=8191&_,B=_>>>13,k=0|h[5],L=8191&k,S=k>>>13,T=0|h[6],A=8191&T,P=T>>>13,O=0|h[7],F=8191&O,H=O>>>13,I=0|h[8],E=8191&I,z=I>>>13,N=0|h[9],R=8191&N,j=N>>>13,q=0|o[0],D=8191&q,Z=q>>>13,U=0|o[1],C=8191&U,J=U>>>13,V=0|o[2],$=8191&V,K=V>>>13,W=0|o[3],G=8191&W,Q=W>>>13,X=0|o[4],Y=8191&X,tt=X>>>13,et=0|o[5],it=8191&et,rt=et>>>13,st=0|o[6],nt=8191&st,ht=st>>>13,ot=0|o[7],at=8191&ot,ut=ot>>>13,ft=0|o[8],lt=8191&ft,dt=ft>>>13,ct=0|o[9],mt=8191&ct,pt=ct>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(l,D))|0)+((8191&(s=(s=Math.imul(l,Z))+Math.imul(d,D)|0))<<13)|0;u=((n=Math.imul(d,Z))+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(m,D),s=(s=Math.imul(m,Z))+Math.imul(p,D)|0,n=Math.imul(p,Z);var vt=(u+(r=r+Math.imul(l,C)|0)|0)+((8191&(s=(s=s+Math.imul(l,J)|0)+Math.imul(d,C)|0))<<13)|0;u=((n=n+Math.imul(d,J)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,D),s=(s=Math.imul(v,Z))+Math.imul(y,D)|0,n=Math.imul(y,Z),r=r+Math.imul(m,C)|0,s=(s=s+Math.imul(m,J)|0)+Math.imul(p,C)|0,n=n+Math.imul(p,J)|0;var yt=(u+(r=r+Math.imul(l,$)|0)|0)+((8191&(s=(s=s+Math.imul(l,K)|0)+Math.imul(d,$)|0))<<13)|0;u=((n=n+Math.imul(d,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,D),s=(s=Math.imul(w,Z))+Math.imul(b,D)|0,n=Math.imul(b,Z),r=r+Math.imul(v,C)|0,s=(s=s+Math.imul(v,J)|0)+Math.imul(y,C)|0,n=n+Math.imul(y,J)|0,r=r+Math.imul(m,$)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,$)|0,n=n+Math.imul(p,K)|0;var Mt=(u+(r=r+Math.imul(l,G)|0)|0)+((8191&(s=(s=s+Math.imul(l,Q)|0)+Math.imul(d,G)|0))<<13)|0;u=((n=n+Math.imul(d,Q)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,D),s=(s=Math.imul(x,Z))+Math.imul(B,D)|0,n=Math.imul(B,Z),r=r+Math.imul(w,C)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(b,C)|0,n=n+Math.imul(b,J)|0,r=r+Math.imul(v,$)|0,s=(s=s+Math.imul(v,K)|0)+Math.imul(y,$)|0,n=n+Math.imul(y,K)|0,r=r+Math.imul(m,G)|0,s=(s=s+Math.imul(m,Q)|0)+Math.imul(p,G)|0,n=n+Math.imul(p,Q)|0;var wt=(u+(r=r+Math.imul(l,Y)|0)|0)+((8191&(s=(s=s+Math.imul(l,tt)|0)+Math.imul(d,Y)|0))<<13)|0;u=((n=n+Math.imul(d,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(L,D),s=(s=Math.imul(L,Z))+Math.imul(S,D)|0,n=Math.imul(S,Z),r=r+Math.imul(x,C)|0,s=(s=s+Math.imul(x,J)|0)+Math.imul(B,C)|0,n=n+Math.imul(B,J)|0,r=r+Math.imul(w,$)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(b,$)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(v,G)|0,s=(s=s+Math.imul(v,Q)|0)+Math.imul(y,G)|0,n=n+Math.imul(y,Q)|0,r=r+Math.imul(m,Y)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Y)|0,n=n+Math.imul(p,tt)|0;var bt=(u+(r=r+Math.imul(l,it)|0)|0)+((8191&(s=(s=s+Math.imul(l,rt)|0)+Math.imul(d,it)|0))<<13)|0;u=((n=n+Math.imul(d,rt)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(A,D),s=(s=Math.imul(A,Z))+Math.imul(P,D)|0,n=Math.imul(P,Z),r=r+Math.imul(L,C)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(S,C)|0,n=n+Math.imul(S,J)|0,r=r+Math.imul(x,$)|0,s=(s=s+Math.imul(x,K)|0)+Math.imul(B,$)|0,n=n+Math.imul(B,K)|0,r=r+Math.imul(w,G)|0,s=(s=s+Math.imul(w,Q)|0)+Math.imul(b,G)|0,n=n+Math.imul(b,Q)|0,r=r+Math.imul(v,Y)|0,s=(s=s+Math.imul(v,tt)|0)+Math.imul(y,Y)|0,n=n+Math.imul(y,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var _t=(u+(r=r+Math.imul(l,nt)|0)|0)+((8191&(s=(s=s+Math.imul(l,ht)|0)+Math.imul(d,nt)|0))<<13)|0;u=((n=n+Math.imul(d,ht)|0)+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(F,D),s=(s=Math.imul(F,Z))+Math.imul(H,D)|0,n=Math.imul(H,Z),r=r+Math.imul(A,C)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(P,C)|0,n=n+Math.imul(P,J)|0,r=r+Math.imul(L,$)|0,s=(s=s+Math.imul(L,K)|0)+Math.imul(S,$)|0,n=n+Math.imul(S,K)|0,r=r+Math.imul(x,G)|0,s=(s=s+Math.imul(x,Q)|0)+Math.imul(B,G)|0,n=n+Math.imul(B,Q)|0,r=r+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(b,Y)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(v,it)|0,s=(s=s+Math.imul(v,rt)|0)+Math.imul(y,it)|0,n=n+Math.imul(y,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ht)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ht)|0;var xt=(u+(r=r+Math.imul(l,at)|0)|0)+((8191&(s=(s=s+Math.imul(l,ut)|0)+Math.imul(d,at)|0))<<13)|0;u=((n=n+Math.imul(d,ut)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(E,D),s=(s=Math.imul(E,Z))+Math.imul(z,D)|0,n=Math.imul(z,Z),r=r+Math.imul(F,C)|0,s=(s=s+Math.imul(F,J)|0)+Math.imul(H,C)|0,n=n+Math.imul(H,J)|0,r=r+Math.imul(A,$)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(P,$)|0,n=n+Math.imul(P,K)|0,r=r+Math.imul(L,G)|0,s=(s=s+Math.imul(L,Q)|0)+Math.imul(S,G)|0,n=n+Math.imul(S,Q)|0,r=r+Math.imul(x,Y)|0,s=(s=s+Math.imul(x,tt)|0)+Math.imul(B,Y)|0,n=n+Math.imul(B,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(v,nt)|0,s=(s=s+Math.imul(v,ht)|0)+Math.imul(y,nt)|0,n=n+Math.imul(y,ht)|0,r=r+Math.imul(m,at)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,at)|0,n=n+Math.imul(p,ut)|0;var Bt=(u+(r=r+Math.imul(l,lt)|0)|0)+((8191&(s=(s=s+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;u=((n=n+Math.imul(d,dt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(R,D),s=(s=Math.imul(R,Z))+Math.imul(j,D)|0,n=Math.imul(j,Z),r=r+Math.imul(E,C)|0,s=(s=s+Math.imul(E,J)|0)+Math.imul(z,C)|0,n=n+Math.imul(z,J)|0,r=r+Math.imul(F,$)|0,s=(s=s+Math.imul(F,K)|0)+Math.imul(H,$)|0,n=n+Math.imul(H,K)|0,r=r+Math.imul(A,G)|0,s=(s=s+Math.imul(A,Q)|0)+Math.imul(P,G)|0,n=n+Math.imul(P,Q)|0,r=r+Math.imul(L,Y)|0,s=(s=s+Math.imul(L,tt)|0)+Math.imul(S,Y)|0,n=n+Math.imul(S,tt)|0,r=r+Math.imul(x,it)|0,s=(s=s+Math.imul(x,rt)|0)+Math.imul(B,it)|0,n=n+Math.imul(B,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ht)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ht)|0,r=r+Math.imul(v,at)|0,s=(s=s+Math.imul(v,ut)|0)+Math.imul(y,at)|0,n=n+Math.imul(y,ut)|0,r=r+Math.imul(m,lt)|0,s=(s=s+Math.imul(m,dt)|0)+Math.imul(p,lt)|0,n=n+Math.imul(p,dt)|0;var kt=(u+(r=r+Math.imul(l,mt)|0)|0)+((8191&(s=(s=s+Math.imul(l,pt)|0)+Math.imul(d,mt)|0))<<13)|0;u=((n=n+Math.imul(d,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(R,C),s=(s=Math.imul(R,J))+Math.imul(j,C)|0,n=Math.imul(j,J),r=r+Math.imul(E,$)|0,s=(s=s+Math.imul(E,K)|0)+Math.imul(z,$)|0,n=n+Math.imul(z,K)|0,r=r+Math.imul(F,G)|0,s=(s=s+Math.imul(F,Q)|0)+Math.imul(H,G)|0,n=n+Math.imul(H,Q)|0,r=r+Math.imul(A,Y)|0,s=(s=s+Math.imul(A,tt)|0)+Math.imul(P,Y)|0,n=n+Math.imul(P,tt)|0,r=r+Math.imul(L,it)|0,s=(s=s+Math.imul(L,rt)|0)+Math.imul(S,it)|0,n=n+Math.imul(S,rt)|0,r=r+Math.imul(x,nt)|0,s=(s=s+Math.imul(x,ht)|0)+Math.imul(B,nt)|0,n=n+Math.imul(B,ht)|0,r=r+Math.imul(w,at)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(b,at)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(v,lt)|0,s=(s=s+Math.imul(v,dt)|0)+Math.imul(y,lt)|0,n=n+Math.imul(y,dt)|0;var Lt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(R,$),s=(s=Math.imul(R,K))+Math.imul(j,$)|0,n=Math.imul(j,K),r=r+Math.imul(E,G)|0,s=(s=s+Math.imul(E,Q)|0)+Math.imul(z,G)|0,n=n+Math.imul(z,Q)|0,r=r+Math.imul(F,Y)|0,s=(s=s+Math.imul(F,tt)|0)+Math.imul(H,Y)|0,n=n+Math.imul(H,tt)|0,r=r+Math.imul(A,it)|0,s=(s=s+Math.imul(A,rt)|0)+Math.imul(P,it)|0,n=n+Math.imul(P,rt)|0,r=r+Math.imul(L,nt)|0,s=(s=s+Math.imul(L,ht)|0)+Math.imul(S,nt)|0,n=n+Math.imul(S,ht)|0,r=r+Math.imul(x,at)|0,s=(s=s+Math.imul(x,ut)|0)+Math.imul(B,at)|0,n=n+Math.imul(B,ut)|0,r=r+Math.imul(w,lt)|0,s=(s=s+Math.imul(w,dt)|0)+Math.imul(b,lt)|0,n=n+Math.imul(b,dt)|0;var St=(u+(r=r+Math.imul(v,mt)|0)|0)+((8191&(s=(s=s+Math.imul(v,pt)|0)+Math.imul(y,mt)|0))<<13)|0;u=((n=n+Math.imul(y,pt)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(R,G),s=(s=Math.imul(R,Q))+Math.imul(j,G)|0,n=Math.imul(j,Q),r=r+Math.imul(E,Y)|0,s=(s=s+Math.imul(E,tt)|0)+Math.imul(z,Y)|0,n=n+Math.imul(z,tt)|0,r=r+Math.imul(F,it)|0,s=(s=s+Math.imul(F,rt)|0)+Math.imul(H,it)|0,n=n+Math.imul(H,rt)|0,r=r+Math.imul(A,nt)|0,s=(s=s+Math.imul(A,ht)|0)+Math.imul(P,nt)|0,n=n+Math.imul(P,ht)|0,r=r+Math.imul(L,at)|0,s=(s=s+Math.imul(L,ut)|0)+Math.imul(S,at)|0,n=n+Math.imul(S,ut)|0,r=r+Math.imul(x,lt)|0,s=(s=s+Math.imul(x,dt)|0)+Math.imul(B,lt)|0,n=n+Math.imul(B,dt)|0;var Tt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(R,Y),s=(s=Math.imul(R,tt))+Math.imul(j,Y)|0,n=Math.imul(j,tt),r=r+Math.imul(E,it)|0,s=(s=s+Math.imul(E,rt)|0)+Math.imul(z,it)|0,n=n+Math.imul(z,rt)|0,r=r+Math.imul(F,nt)|0,s=(s=s+Math.imul(F,ht)|0)+Math.imul(H,nt)|0,n=n+Math.imul(H,ht)|0,r=r+Math.imul(A,at)|0,s=(s=s+Math.imul(A,ut)|0)+Math.imul(P,at)|0,n=n+Math.imul(P,ut)|0,r=r+Math.imul(L,lt)|0,s=(s=s+Math.imul(L,dt)|0)+Math.imul(S,lt)|0,n=n+Math.imul(S,dt)|0;var At=(u+(r=r+Math.imul(x,mt)|0)|0)+((8191&(s=(s=s+Math.imul(x,pt)|0)+Math.imul(B,mt)|0))<<13)|0;u=((n=n+Math.imul(B,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(R,it),s=(s=Math.imul(R,rt))+Math.imul(j,it)|0,n=Math.imul(j,rt),r=r+Math.imul(E,nt)|0,s=(s=s+Math.imul(E,ht)|0)+Math.imul(z,nt)|0,n=n+Math.imul(z,ht)|0,r=r+Math.imul(F,at)|0,s=(s=s+Math.imul(F,ut)|0)+Math.imul(H,at)|0,n=n+Math.imul(H,ut)|0,r=r+Math.imul(A,lt)|0,s=(s=s+Math.imul(A,dt)|0)+Math.imul(P,lt)|0,n=n+Math.imul(P,dt)|0;var Pt=(u+(r=r+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,pt)|0)+Math.imul(S,mt)|0))<<13)|0;u=((n=n+Math.imul(S,pt)|0)+(s>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(R,nt),s=(s=Math.imul(R,ht))+Math.imul(j,nt)|0,n=Math.imul(j,ht),r=r+Math.imul(E,at)|0,s=(s=s+Math.imul(E,ut)|0)+Math.imul(z,at)|0,n=n+Math.imul(z,ut)|0,r=r+Math.imul(F,lt)|0,s=(s=s+Math.imul(F,dt)|0)+Math.imul(H,lt)|0,n=n+Math.imul(H,dt)|0;var Ot=(u+(r=r+Math.imul(A,mt)|0)|0)+((8191&(s=(s=s+Math.imul(A,pt)|0)+Math.imul(P,mt)|0))<<13)|0;u=((n=n+Math.imul(P,pt)|0)+(s>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(R,at),s=(s=Math.imul(R,ut))+Math.imul(j,at)|0,n=Math.imul(j,ut),r=r+Math.imul(E,lt)|0,s=(s=s+Math.imul(E,dt)|0)+Math.imul(z,lt)|0,n=n+Math.imul(z,dt)|0;var Ft=(u+(r=r+Math.imul(F,mt)|0)|0)+((8191&(s=(s=s+Math.imul(F,pt)|0)+Math.imul(H,mt)|0))<<13)|0;u=((n=n+Math.imul(H,pt)|0)+(s>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(R,lt),s=(s=Math.imul(R,dt))+Math.imul(j,lt)|0,n=Math.imul(j,dt);var Ht=(u+(r=r+Math.imul(E,mt)|0)|0)+((8191&(s=(s=s+Math.imul(E,pt)|0)+Math.imul(z,mt)|0))<<13)|0;u=((n=n+Math.imul(z,pt)|0)+(s>>>13)|0)+(Ht>>>26)|0,Ht&=67108863;var It=(u+(r=Math.imul(R,mt))|0)+((8191&(s=(s=Math.imul(R,pt))+Math.imul(j,mt)|0))<<13)|0;return u=((n=Math.imul(j,pt))+(s>>>13)|0)+(It>>>26)|0,It&=67108863,a[0]=gt,a[1]=vt,a[2]=yt,a[3]=Mt,a[4]=wt,a[5]=bt,a[6]=_t,a[7]=xt,a[8]=Bt,a[9]=kt,a[10]=Lt,a[11]=St,a[12]=Tt,a[13]=At,a[14]=Pt,a[15]=Ot,a[16]=Ft,a[17]=Ht,a[18]=It,0!==u&&(a[19]=u,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var h=s;s=0;for(var o=67108863&r,a=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=a;u++){var f=n-u,l=(0|t.words[f])*(0|e.words[u]),d=67108863&l;o=67108863&(d=d+o|0),s+=(h=(h=h+(l/67108864|0)|0)+(d>>>26)|0)>>>26,h&=67108863}i.words[n]=o,r=h,h=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function y(t,e,i){return v(t,e,i)}function M(t,e){this.x=t,this.y=e}Math.imul||(g=p),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?p(this,t,e):i<1024?v(this,t,e):y(this,t,e)},M.prototype.makeRBT=function(t){for(var e=new Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},M.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},M.prototype.permute=function(t,e,i,r,s,n){for(var h=0;h<n;h++)r[h]=e[t[h]],s[h]=i[t[h]]},M.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var h=1;h<s;h<<=1)for(var o=h<<1,a=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),f=0;f<s;f+=o)for(var l=a,d=u,c=0;c<h;c++){var m=i[f+c],p=r[f+c],g=i[f+c+h],v=r[f+c+h],y=l*g-d*v;v=l*v+d*g,g=y,i[f+c]=m+g,r[f+c]=p+v,i[f+c+h]=m-g,r[f+c+h]=p-v,c!==o&&(y=a*l-u*d,d=a*d+u*l,l=y)}},M.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},M.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},M.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},M.prototype.convert13b=function(t,e,i,s){for(var n=0,h=0;h<e;h++)n+=0|t[h],i[2*h]=8191&n,n>>>=13,i[2*h+1]=8191&n,n>>>=13;for(h=2*e;h<s;++h)i[h]=0;r(0===n),r(!(-8192&n))},M.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},M.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),h=new Array(r),o=new Array(r),a=new Array(r),u=new Array(r),f=new Array(r),l=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,h,r),this.convert13b(e.words,e.length,u,r),this.transform(h,n,o,a,r,s),this.transform(u,n,f,l,r,s);for(var c=0;c<r;c++){var m=o[c]*f[c]-a[c]*l[c];a[c]=o[c]*l[c]+a[c]*f[c],o[c]=m}return this.conjugate(o,a,r),this.transform(o,a,d,n,r,s),this.conjugate(d,n,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),y(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,s=0;s<this.length;s++){var n=(0|this.words[s])*t,h=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=h>>>26,this.words[s]=67108863&h}return 0!==i&&(this.words[s]=i,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=t.words[r]>>>s&1}return e}(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,s=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var h=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,a=(0|this.words[e])-o<<i;this.words[e]=a|h,h=o>>>26-i}h&&(this.words[e]=h,this.length++)}if(0!==s){for(e=this.length-1;e>=0;e--)this.words[e+s]=this.words[e];for(e=0;e<s;e++)this.words[e]=0;this.length+=s}return this._strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){var s;r("number"==typeof t&&t>=0),s=e?(e-e%26)/26:0;var n=t%26,h=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=i;if(s-=h,s=Math.max(0,s),a){for(var u=0;u<h;u++)a.words[u]=this.words[u];a.length=h}if(0===h);else if(this.length>h)for(this.length-=h,u=0;u<this.length;u++)this.words[u]=this.words[u+h];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=s);u--){var l=0|this.words[u];this.words[u]=f<<26-n|l>>>n,f=l&o}return a&&0!==f&&(a.words[a.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,s=1<<e;return!(this.length<=i)&&!!(this.words[i]&s)},n.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var s=67108863^67108863>>>e<<e;this.words[this.length-1]&=s}return this._strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){var s,n,h=t.length+i;this._expand(h);var o=0;for(s=0;s<t.length;s++){n=(0|this.words[s+i])+o;var a=(0|t.words[s])*e;o=((n-=67108863&a)>>26)-(a/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)o=(n=(0|this.words[s+i])+o)>>26,this.words[s+i]=67108863&n;if(0===o)return this._strip();for(r(-1===o),o=0,s=0;s<this.length;s++)o=(n=-(0|this.words[s])+o)>>26,this.words[s]=67108863&n;return this.negative=1,this._strip()},n.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),s=t,h=0|s.words[s.length-1];0!==(i=26-this._countBits(h))&&(s=s.ushln(i),r.iushln(i),h=0|s.words[s.length-1]);var o,a=r.length-s.length;if("mod"!==e){(o=new n(null)).length=a+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var f=r.clone()._ishlnsubmul(s,1,a);0===f.negative&&(r=f,o&&(o.words[a]=1));for(var l=a-1;l>=0;l--){var d=67108864*(0|r.words[s.length+l])+(0|r.words[s.length+l-1]);for(d=Math.min(d/h|0,67108863),r._ishlnsubmul(s,d,l);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(s,1,l),r.isZero()||(r.negative^=1);o&&(o.words[l]=d)}return o&&o._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:o||null,mod:r}},n.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(s=o.div.neg()),"div"!==e&&(h=o.mod.neg(),i&&0!==h.negative&&h.iadd(t)),{div:s,mod:h}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(s=o.div.neg()),{div:s,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(h=o.mod.neg(),i&&0!==h.negative&&h.isub(t)),{div:o.div,mod:h}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e);var s,h,o},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,s=0,n=this.length-1;n>=0;n--)s=(i*s+(0|this.words[n]))%t;return e?-s:s},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,s=this.length-1;s>=0;s--){var n=(0|this.words[s])+67108864*i;this.words[s]=n/t|0,i=n%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s=new n(1),h=new n(0),o=new n(0),a=new n(1),u=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++u;for(var f=i.clone(),l=e.clone();!e.isZero();){for(var d=0,c=1;!(e.words[0]&c)&&d<26;++d,c<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(s.isOdd()||h.isOdd())&&(s.iadd(f),h.isub(l)),s.iushrn(1),h.iushrn(1);for(var m=0,p=1;!(i.words[0]&p)&&m<26;++m,p<<=1);if(m>0)for(i.iushrn(m);m-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(f),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o),h.isub(a)):(i.isub(e),o.isub(s),a.isub(h))}return{a:o,b:a,gcd:i.iushln(u)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s,h=new n(1),o=new n(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var u=0,f=1;!(e.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(e.iushrn(u);u-- >0;)h.isOdd()&&h.iadd(a),h.iushrn(1);for(var l=0,d=1;!(i.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),h.isub(o)):(i.isub(e),o.isub(h))}return(s=0===e.cmpn(1)?h:o).cmpn(0)<0&&s.iadd(t),s},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,s=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,h=i;0!==n&&h<this.length;h++){var o=0|this.words[h];n=(o+=n)>>>26,o&=67108863,this.words[h]=o}return 0!==n&&(this.words[h]=n,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var s=0|this.words[0];e=s===t?0:s<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new L(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function L(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){L.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},s(_,b),_.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),s=0;s<r;s++)e.words[s]=t.words[s];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=n&i,s=10;s<t.length;s++){var h=0|t.words[s];t.words[s-10]=(h&i)<<4|n>>>22,n=h}n>>>=22,t.words[s-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},s(x,b),s(B,b),s(k,b),k.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new x;else if("p192"===t)e=new B;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new k}return w[t]=e,e},L.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},L.prototype._verify2=function(t,e){r(!(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},L.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(f(t,t.umod(this.m)._forceRed(this)),t)},L.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},L.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},L.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},L.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},L.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},L.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},L.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},L.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},L.prototype.isqr=function(t){return this.imul(t,t.clone())},L.prototype.sqr=function(t){return this.mul(t,t)},L.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new n(1)).iushrn(2);return this.pow(t,i)}for(var s=this.m.subn(1),h=0;!s.isZero()&&0===s.andln(1);)h++,s.iushrn(1);r(!s.isZero());var o=new n(1).toRed(this),a=o.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(a);)f.redIAdd(a);for(var l=this.pow(f,s),d=this.pow(t,s.addn(1).iushrn(1)),c=this.pow(t,s),m=h;0!==c.cmp(o);){for(var p=c,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<m);var v=this.pow(l,new n(1).iushln(m-g-1));d=d.redMul(v),l=v.redSqr(),c=c.redMul(l),m=g}return d},L.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},L.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var s=i[0],h=0,o=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],f=a-1;f>=0;f--){var l=u>>f&1;s!==i[0]&&(s=this.sqr(s)),0!==l||0!==h?(h<<=1,h|=l,(4===++o||0===r&&0===f)&&(s=this.mul(s,i[h]),o=0,h=0)):o=0}a=26}return s},L.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},L.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new S(t)},s(S,L),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),h=s;return s.cmp(this.m)>=0?h=s.isub(this.m):s.cmpn(0)<0&&(h=s.iadd(this.m)),h._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,i("62e4")(t))},b2ed:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleMountainRange=void 0;const s=i("1c35"),n=r(i("94f8")),h=r(i("13ca"));class o extends h.default{constructor(t=n.default,e=[],i,r,h){super(),this.root=s.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},e=e.map(this.bufferify),this.hashFn=this.bufferifyFn(t),this.hashLeafFn=i,this.peakBaggingFn=r,this.hashBranchFn=h;for(const t of e)this.append(t)}append(t){t=this.bufferify(t);const e=this.hashFn(t),i=this.bufferToHex(e);this.data[i]&&this.bufferToHex(this.hashFn(this.data[i]))===i||(this.data[i]=t);const r=this.hashLeaf(this.size+1,e);this.hashes[this.size+1]=r,this.width+=1;const s=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const n=[];for(let t=0;t<s.length;t++)n[t]=this._getOrCreateNode(s[t]);this.root=this.peakBagging(this.width,n)}hashLeaf(t,e){return e=this.bufferify(e),this.hashLeafFn?this.bufferify(this.hashLeafFn(t,e)):this.hashFn(s.Buffer.concat([this.bufferify(t),e]))}hashBranch(t,e,i){return this.hashBranchFn?this.bufferify(this.hashBranchFn(t,e,i)):this.hashFn(s.Buffer.concat([this.bufferify(t),this.bufferify(e),this.bufferify(i)]))}getPeaks(){const t=this.getPeakIndexes(this.width),e=[];for(let i=0;i<t.length;i++)e[i]=this.hashes[t[i]];return e}getLeafIndex(t){return t%2==1?this.getSize(t):this.getSize(t-1)+1}getPeakIndexes(t){const e=this.numOfPeaks(t),i=[];let r=0,s=0;for(let n=255;n>0&&!(t&1<<n-1&&(s=s+(1<<n)-1,i[r++]=s,i.length>=e));n--);if(r!==i.length)throw new Error("invalid bit calculation");return i}numOfPeaks(t){let e=t,i=0;for(;e>0;)e%2==1&&i++,e>>=1;return i}peakBagging(t,e){const i=this.getSize(t);if(this.numOfPeaks(t)!==e.length)throw new Error("received invalid number of peaks");return 0!==t||e.length?this.peakBaggingFn?this.bufferify(this.peakBaggingFn(i,e)):this.hashFn(s.Buffer.concat([this.bufferify(i),...e.map(this.bufferify)])):s.Buffer.alloc(0)}getSize(t){return(t<<1)-this.numOfPeaks(t)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(t){return this.hashes[t]}mountainHeight(t){let e=1;for(;1<<e<=t+e;)e++;return e-1}heightAt(t){let e=t,i=0,r=0;for(;e>i;)e-=(1<<r)-1,r=this.mountainHeight(e),i=(1<<r)-1;return r-(i-e)}isLeaf(t){return 1===this.heightAt(t)}getChildren(t){const e=t-(1<<this.heightAt(t)-1),i=t-1;if(e===i)throw new Error("not a parent");return[e,i]}getMerkleProof(t){if(t>this.size)throw new Error("out of range");if(!this.isLeaf(t))throw new Error("not a leaf");const e=this.root,i=this.width,r=this.getPeakIndexes(this.width),s=[];let n=0;for(let e=0;e<r.length;e++)s[e]=this.hashes[r[e]],r[e]>=t&&0===n&&(n=r[e]);let h=0,o=0,a=this.heightAt(n);const u=[];for(;n!==t;)a--,[h,o]=this.getChildren(n),n=t<=h?h:o,u[a-1]=this.hashes[t<=h?o:h];return{root:e,width:i,peakBagging:s,siblings:u}}verify(t,e,i,r,s,n){r=this.bufferify(r);if(this.getSize(e)<i)throw new Error("index is out of range");if(!t.equals(this.peakBagging(e,s)))throw new Error("invalid root hash from the peaks");let h,o=0;const a=this.getPeakIndexes(e);for(let t=0;t<a.length;t++)if(a[t]>=i){h=s[t],o=a[t];break}if(!h)throw new Error("target not found");let u=n.length+1;const f=new Array(u);let l,d=0,c=0;for(;u>0&&(f[--u]=o,o!==i);)[d,c]=this.getChildren(o),o=i>d?c:d;for(;u<f.length;)o=f[u],l=0===u?this.hashLeaf(o,this.hashFn(r)):o-1===f[u-1]?this.hashBranch(o,n[u-1],l):this.hashBranch(o,l,n[u-1]),u++;if(!l.equals(h))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(t,e){const i={};let r=0,s=0,n=e.length;for(let h=1;h<=32;h++)r=32-h,s=1<<h-1,i[r]=t&s?e[--n]:0;if(0!==n)throw new Error("invalid number of peaks");return i}peakMapToPeaks(t,e){const i=this.numOfPeaks(t),r=new Array(i);let s=0;for(let t=0;t<32;t++)0!==e[t]&&(r[s++]=e[t]);if(s!==i)throw new Error("invalid number of peaks");return r}peakUpdate(t,e,i){const r={},s=t+1;let n=this.getLeafIndex(s),h=this.hashLeaf(n,i),o=0,a=0,u=!1,f=!1,l=!1;for(let i=1;i<=32;i++)o=32-i,l?r[o]=e[o]:(a=1<<i-1,u=!!(t&a),f=!!(s&a),n++,u&&(h=this.hashBranch(n,e[o],h)),f?(r[o]=u?e[o]:h,l=!0):r[o]=0);return r}rollUp(t,e,i,r){if(!t.equals(this.peakBagging(e,i)))throw new Error("invalid root hash from the peaks");let s=e,n=this.peaksToPeakMap(e,i);for(let t=0;t<r.length;t++)n=this.peakUpdate(s,n,r[t]),s++;return this.peakBagging(s,this.peakMapToPeaks(s,n))}_getOrCreateNode(t){if(t>this.size)throw new Error("out of range");if(!this.hashes[t]){const[e,i]=this.getChildren(t),r=this._getOrCreateNode(e),s=this._getOrCreateNode(i);this.hashes[t]=this.hashBranch(t,r,s)}return this.hashes[t]}}e.MerkleMountainRange=o,"undefined"!=typeof window&&(window.MerkleMountainRange=o),e.default=o},db6e:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleTree=void 0;const s=r(i("6d46"));e.MerkleTree=s.default;var n=i("b2ed");Object.defineProperty(e,"MerkleMountainRange",{enumerable:!0,get:function(){return n.MerkleMountainRange}});var h=i("655a");Object.defineProperty(e,"IncrementalMerkleTree",{enumerable:!0,get:function(){return h.IncrementalMerkleTree}});var o=i("04f0");Object.defineProperty(e,"MerkleSumTree",{enumerable:!0,get:function(){return o.MerkleSumTree}}),e.default=s.default},feaa:function(t,e,i){(function(e){t.exports=function(t){for(var i=new e(t.length),r=0,s=t.length-1;r<=s;++r,--s)i[r]=t[s],i[s]=t[r];return i}}).call(this,i("1c35").Buffer)}}]);