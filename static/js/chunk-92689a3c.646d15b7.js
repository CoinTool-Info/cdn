(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-92689a3c"],{"2ece":function(e,t,n){"use strict";n.r(t);var r=n("1da1"),a=n("b85c"),i=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("ac1f"),n("1276"),n("a9e3"),n("159b"),n("a434"),n("3ca3"),n("ddb0"),n("ed08")),o=n("b893"),s=(n("7052"),n("99e5")),c=n.n(s),l=n("61f7"),u=(n("901e"),n("2f62")),d=n("3603"),b=n("771e"),p=n("3e80"),f=n("c030"),h={name:"moreToOne",computed:Object(u.d)({chainNetwork:function(e){return e.dapp.chainNetwork},networkId:function(e){return e.dapp.web3.networkId},initial:function(e){return e.dapp.web3.initial},myAddress:function(e){return e.dapp.web3.account},addressCount:function(){return this.configObj.privateKeyObj?this.configObj.privateKeyObj.length:0}}),watch:{initial:function(e,t){e&&(this.checkVip(),this.initConfig())}},data:function(){return{web3:null,global:{symbol:"",provider:null,userTime:0,isVip:!1},dialog:{addToken:!1,import:!1},loading:{tableData:!1,select:!1,selectObj:!1,import:!1,signSend:!1,download:!1},configObj:{privateKeyObj:[],rpcNode:"",blockExplorerUrls:"",chainId:0,gasPrice:100,gasLimit:5e5,receiveAddress:"",fntAddress:""},selectToken:null,multipleSelection:[],statusArray:[{index:0,name:"batchCollection.notPerformedStatus",type:"info"},{index:1,name:"batchCollection.successStatus",type:"success"},{index:2,name:"batchCollection.failStatus",type:"error"},{index:3,name:"batchCollection.gasStatus",type:"error"},{index:4,name:"batchCollection.pendingStatus",type:"warning"},{index:5,name:"batchCollection.queryStatus",type:"success"},{index:6,name:"batchCollection.queryFailStatus",type:"error"}],query:"",importText:"",sign:{signSendData:"",txId:"",error:null}}},methods:{delSelect:function(){if(0!==this.$refs.multipleTable.selection.length){var e=this.$refs.multipleTable.selection.map((function(e){return e.id}));this.configObj.privateKeyObj=this.configObj.privateKeyObj.filter((function(t){return-1===e.indexOf(t.id)}))}else this.$message.error(this.$t("batchCollection.selectionTips"))},addtokenClosed:function(){this.query="",this.importText=""},importAddress:function(){if(this.importText){var e=this.importText.split("\n");this.configObj.privateKeyObj=[];var t,n=1,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;try{var o=this.web3.eth.accounts.privateKeyToAccount(i,!0);this.configObj.privateKeyObj.push({address:o.address,id:n++,prv:i,result:0,nums:0,loading:!1})}catch(e){}}}catch(e){r.e(e)}finally{r.f()}this.$message.success(this.$t("success")),this.dialog.import=!1}else this.$message.error(this.$t("batchCollection.textNull"))},onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.global.isVip){t.next=3;break}return e.$message.error("当前钱包不是VIP，无法使用本功能"),t.abrupt("return");case 3:if(e.configObj.fntAddress){t.next=6;break}return e.$message.error(e.$t("batchCollection.inputNftAddress")),t.abrupt("return");case 6:if(e.configObj.receiveAddress&&Object(l.h)(e.configObj.receiveAddress)){t.next=9;break}return e.$message.error(e.$t("batchCollection.receiveAddressTips")),t.abrupt("return");case 9:return t.next=11,e.supportsInterface(e.configObj.fntAddress);case 11:if(t.sent){t.next=15;break}return e.$message.error("不是一个标准NFT合约地址"),t.abrupt("return");case 15:e.loading.tableData=!0,n=0;case 17:if(!(n<e.configObj.privateKeyObj.length)){t.next=24;break}return r=e.configObj.privateKeyObj[n],t.next=21,e.sendBalance(r);case 21:n++,t.next=17;break;case 24:e.loading.tableData=!1;case 25:case"end":return t.stop()}}),t)})))()},sendBalance:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,a,i,o,s,c,l,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=new f.Wallet(e.prv),a=r.connect(t.global.provider),n.next=5,t.web3.eth.getTransactionCount(e.address).catch((function(){return!1}));case 5:return i=n.sent,o=new f.Contract(t.configObj.fntAddress,b.abi,a),e.result=4,n.next=10,t.web3.eth.getGasPrice();case 10:s=n.sent,s=Math.ceil(1.3*s),c=0;case 14:if(!(c<=Number(e.nums))){n.next=31;break}return n.next=17,o.tokenOfOwnerByIndex(r.address,c).catch((function(){return 0}));case 17:if(0!==(l=n.sent)){n.next=20;break}return n.abrupt("continue",28);case 20:return n.next=24,o.transferFrom(r.address,t.configObj.receiveAddress,l,{from:r.address,gasLimit:f.utils.hexlify(t.configObj.gasLimit),gasPrice:s,nonce:i}).then((function(e){return e})).catch((function(t){return e.result=2,!1}));case 24:if(u=n.sent,i++,!1!==u){n.next=28;break}return n.abrupt("return");case 28:c++,n.next=14;break;case 31:e.result=4===e.result?1:4===e.result,n.next=38;break;case 34:n.prev=34,n.t0=n.catch(0),e.result=2;case 38:case"end":return n.stop()}}),n,null,[[0,34]])})))()},toggleSelection:function(e){var t=this;this.$refs.multipleTable.clearSelection(),e&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)}))},reload:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.configObj.fntAddress){t.next=3;break}return e.$message.error(e.$t("batchCollection.pleaseSelectToken")),t.abrupt("return");case 3:return t.next=5,e.supportsInterface(e.configObj.fntAddress);case 5:if(t.sent){t.next=9;break}return e.$message.error("不是一个标准NFT合约地址"),t.abrupt("return");case 9:e.loading.tableData=!0,n=0;case 11:if(!(n<e.configObj.privateKeyObj.length)){t.next=18;break}return r=e.configObj.privateKeyObj[n],t.next=15,e.getWeb3Balance(r);case 15:n++,t.next=11;break;case 18:e.loading.tableData=!1;case 19:case"end":return t.stop()}}),t)})))()},handleRefresh:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.loading.selectObj=!0,r.next=3,n.getWeb3Balance(t[e]);case 3:n.loading.selectObj=!1;case 4:case"end":return r.stop()}}),r)})))()},supportsInterface:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new t.web3.eth.Contract(b.abi,e);case 2:return r=n.sent,n.next=5,r.methods.supportsInterface("0x80ac58cd").call().then((function(e){return e})).catch((function(e){return!1}));case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}),n)})))()},getWeb3Balance:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.configObj.fntAddress){n.next=3;break}return t.$message.error(t.$t("batchCollection.pleaseSelectToken")),n.abrupt("return");case 3:return n.prev=3,n.next=6,new t.web3.eth.Contract(b.abi,t.configObj.fntAddress);case 6:return r=n.sent,n.next=9,r.methods.balanceOf(e.address).call();case 9:e.nums=n.sent,e.result=5,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),e.result=6;case 16:case"end":return n.stop()}}),n,null,[[3,13]])})))()},handleDelete:function(e,t){t.splice(e,1)},handleSelectionChange:function(e){this.multipleSelection=e},initConfig:function(){if(this.myAddress){var e=Object(o.i)(this.networkId);this.global.symbol=e.symbol,this.configObj.rpcNode=e.rpcUrls[0],this.configObj.chainId=e.chainId,this.web3=new c.a(new c.a.providers.HttpProvider(this.configObj.rpcNode)),this.global.provider=new p.a(this.configObj.rpcNode)}},exportExcel:function(){var e=this;0!==this.$refs.multipleTable.selection.length?(this.loading.download=!0,Promise.all([n.e("chunk-5164a781"),n.e("chunk-519483dc"),n.e("chunk-fc6d179e")]).then(n.bind(null,"4bf8")).then((function(t){var n=["id","address","balance","tokenBalance","txId"],r=e.$refs.multipleTable.selection,a=e.formatJson(n,r),o=e.global.symbol+Object(i.j)(new Date,"{h}{i}{s}");t.export_json_to_excel({header:n,filename:o,data:a}),e.loading.download=!1}))):this.$message.error(this.$t("batchCollection.selectionTips"))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return"timestamp"===e?Object(i.j)(t[e]):t[e]}))}))},checkVip:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.myAddress){t.next=10;break}return n=Object(o.i)(e.networkId),r=new c.a(new c.a.providers.HttpProvider(n.rpcUrls[0])),e.global.isVip=!0,a=new r.eth.Contract(d.abi,n.multiSenderAddress),t.next=8,a.methods.isVIP(e.myAddress).call().catch((function(){return"0"}));case 8:i=t.sent,e.global.isVip="1"===i;case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.initConfig(),this.checkVip()}},g=h,m=(n("d20e"),n("2877")),v=Object(m.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-row",{staticStyle:{"margin-bottom":"30px"}},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"operationBtn"},[n("el-button",{attrs:{icon:"el-icon-bottom",type:"primary"},on:{click:function(t){e.dialog.import=!0}}},[e._v(e._s(e.$t("batchCollection.importAccount")))]),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.download,expression:"loading.download"}],attrs:{icon:"el-icon-top",type:"primary"},on:{click:function(t){return e.exportExcel()}}},[e._v(e._s(e.$t("batchCollection.exportSelected")))]),n("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.delSelect()}}},[e._v(e._s(e.$t("batchCollection.deleteSelected")))])],1),n("el-dialog",{attrs:{title:e.$t("batchCollection.importAddress"),visible:e.dialog.import,width:"600px"},on:{"update:visible":function(t){return e.$set(e.dialog,"import",t)},closed:function(t){return e.addtokenClosed()}}},[n("span",[e._v(e._s(e.$t("batchCollection.privateFormat")))]),n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.import,expression:"loading.import"}],attrs:{type:"textarea",rows:10,placeholder:e.$t("batchCollection.privateFormat")},model:{value:e.importText,callback:function(t){e.importText=t},expression:"importText"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialog.import=!1}}},[e._v(e._s(e.$t("cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.importAddress()}}},[e._v(e._s(e.$t("confirm")))])],1)],1)],1)],1),n("el-row",{staticStyle:{"margin-bottom":"30px"}},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"transactionTable"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.tableData,expression:"loading.tableData"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{height:"250",data:e.configObj.privateKeyObj,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),n("el-table-column",{attrs:{prop:"address",label:e.$t("address")+" ("+e.addressCount+")",width:"380",align:"center"}}),n("el-table-column",{attrs:{prop:"nums",label:"数量",width:"380",align:"center"}}),n("el-table-column",{attrs:{prop:"result",label:"结果",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e.statusArray[t.row.result].type}},[e._v(e._s(e.$t(e.statusArray[t.row.result].name)))])]}}])}),n("el-table-column",{attrs:{label:e.$t("operate"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:e.$t("delete")}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return e.handleDelete(t.$index,e.configObj.privateKeyObj)}}})],1),n("el-tooltip",{attrs:{content:e.$t("refresh")}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.selectObj,expression:"loading.selectObj"}],attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:function(n){return e.handleRefresh(t.$index,e.configObj.privateKeyObj)}}})],1)]}}])})],1),n("div",{staticClass:"multipleBtn"},[n("el-form",{ref:"configObj",attrs:{model:e.configObj,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"NFT合约地址:"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:e.$t("batchCollection.inputNftAddress"),clearable:!0},model:{value:e.configObj.fntAddress,callback:function(t){e.$set(e.configObj,"fntAddress",t)},expression:"configObj.fntAddress"}})],1),n("el-form-item",{attrs:{label:e.$t("batchCollection.receiveAddress")+":"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:e.$t("batchCollection.inputReceiveAddress"),clearable:!0},model:{value:e.configObj.receiveAddress,callback:function(t){e.$set(e.configObj,"receiveAddress",t)},expression:"configObj.receiveAddress"}})],1)],1),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.reload()}}},[e._v("重新读取数据")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.onSubmit()}}},[e._v("开始归集")]),n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[e._v(e._s(e.$t("batchCollection.tips1")))])],1)],1)])],1)],1)}),[],!1,null,"5234c5a1",null);t.default=v.exports},"674d":function(e,t,n){},d20e:function(e,t,n){"use strict";n("674d")}}]);