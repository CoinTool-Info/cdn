(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-98ce3a40"],{"0181":function(e,t,a){},"300f":function(e,t,a){"use strict";a.r(t),a("4de4"),a("d3b7");var n=a("c7eb"),l=a("b85c"),i=a("1da1"),s=(a("d81d"),a("14d9"),a("13d5"),a("a434"),a("b680"),a("ac1f"),a("25f0"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("ed08")),r=a("b893"),o=a("c0d8"),c=a.n(o),u=a("901e"),d=a.n(u),p=a("2f62"),b=a("8325"),h=a("a6b4"),g=a("3e80"),m=a("7f80"),f=a("c030"),v={name:"batchCallAbi",computed:Object(p.d)({initial:function(e){return e.dapp.web3.initial},myAddress:function(e){return e.dapp.web3.account},networkId:function(e){return e.dapp.web3.networkId},device:function(e){return e.app.device},sunBalance:function(){return this.privateKeyObj&&this.privateKeyObj.length>0?this.privateKeyObj.reduce((function(e,t){return new d.a(t.balance).plus(e)}),0).toFixed(4):new d.a(0).toFixed(0)},sunTokenBalance:function(){return this.privateKeyObj&&this.privateKeyObj.length>0?this.privateKeyObj.reduce((function(e,t){return new d.a(t.tokenBalance).plus(e)}),0).toFixed(4):new d.a(0).toFixed(4)},addressCount:function(){return this.privateKeyObj?this.privateKeyObj.length:0},progress:function(){return 0===this.maxIndex?0:100*parseFloat(this.processIndex/this.maxIndex)}}),directives:{clipboard:b.a},components:{BatchCallDrawer:h.a},watch:{processIndex:function(){this.processIndex===this.maxIndex&&(this.loading.call=!1)}},data:function(){return{hiddenAddress:s.l,downFixed:r.l,global:{symbol:null,chainId:null,baseUrl:null,rpcNode:null,provider:null,multicallAddress:null},dialog:{dialogShow:!1,import:!1,progressShow:!1,rpc:!1},loading:{tableData:!1,import:!1,download:!1,swap:!1,rpc:!1,call:!1},setting:{randomDelay:!1,delayTime:0,delayStart:0,delayEnd:1},importText:"",privateKeyObj:[],multipleSelection:[],processIndex:0,maxIndex:0}},methods:{confirmDrawer:function(e){var t=this;return Object(i.a)(Object(n.a)().mark((function a(){var i,r,o,c;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=e.params,t.dialog.dialogShow=!1,t.loading.progressShow=!0,t.loading.call=!0,t.processIndex=0,t.maxIndex=t.$refs.multipleTable.selection.length,r=Object(l.a)(t.$refs.multipleTable.selection),a.prev=8,c=Object(n.a)().mark((function e(){var a,l,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.value,t.sendCallAbi(a,i),!t.setting.randomDelay){e.next=9;break}if(!((l=Object(s.i)(1e3*t.setting.delayStart,1e3*t.setting.delayEnd))>0)){e.next=7;break}return e.next=7,new Promise((function(e){return setTimeout(e,l)}));case 7:e.next=14;break;case 9:if(!(t.setting.delayTime>0)){e.next=14;break}if(!((r=1e3*t.setting.delayTime)>0)){e.next=14;break}return e.next=14,new Promise((function(e){return setTimeout(e,r)}));case 14:case"end":return e.stop()}}),e)})),r.s();case 11:if((o=r.n()).done){a.next=15;break}return a.delegateYield(c(),"t0",13);case 13:a.next=11;break;case 15:a.next=20;break;case 17:a.prev=17,a.t1=a.catch(8),r.e(a.t1);case 20:return a.prev=20,r.f(),a.finish(20);case 23:case"end":return a.stop()}}),a,null,[[8,17,20,23]])})))()},sendCallAbi:function(e,t){var a=this;return Object(i.a)(Object(n.a)().mark((function l(){var i,o,u,p,b,h,g,m,v,w;return Object(n.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new f.Wallet(e.prv.replace("0x","")),o=i.connect(a.global.provider),n.next=4,a.global.web3.eth.getTransactionCount(i.address,"pending").catch((function(e){return 0}));case 4:return e.nonce=n.sent,n.next=7,a.global.web3.eth.getBalance(i.address);case 7:if(u=n.sent,e.balance=Object(s.e)(u),e.balanceStatus=1,!(e.balance<=0)){n.next=15;break}return e.resultStatus=2,e.resultErrorMsg="Insufficient balance",a.processIndex++,n.abrupt("return");case 15:if(p=Object(r.F)(t.hex,i.address),1===t.gasLimitType&&(b=t.gasLimit),3===t.gasLimitType&&(b=Object(s.i)(t.gasLimitFrom,t.gasLimitTo)),h=c.a.utils.toWei(t.gasPrice.toString(),"gwei"),g="0",t.toAllBalances?p=Object(r.G)(p,e.balance):(g=t.senderNumberSwitch?Object(s.k)(t.senderNumberFrom,t.senderNumberTo):t.senderNumber,p=Object(r.G)(p,g)),2!==t.gasLimitType){n.next=30;break}return n.next=25,o.estimateGas({to:t.receiveAddress,from:i.address,nonce:e.nonce,gasPrice:h,data:p,value:c.a.utils.toWei(g,"ether")}).catch((function(t){return e.resultStatus=2,e.resultErrorMsg=t.reason,!1}));case 25:if(m=n.sent){n.next=29;break}return a.processIndex++,n.abrupt("return");case 29:b=m.toNumber();case 30:return t.toAllBalances&&(v=new d.a(h).multipliedBy(b),v=c.a.utils.fromWei(v.toString(),"ether"),g=new d.a(e.balance).minus(v).toString()),g=c.a.utils.toWei(g,"ether"),n.next=34,o.sendTransaction({to:t.receiveAddress,from:i.address,nonce:e.nonce,gasPrice:h,gasLimit:b,data:p,value:g}).catch((function(t){return e.resultStatus=2,e.resultErrorMsg=t.reason,!1}));case 34:if(!(w=n.sent)){n.next=38;break}return n.next=38,w.wait().then((function(t){return e.resultStatus=1,e.resultTx=t.transactionHash,!0})).catch((function(t){return e.resultStatus=2,e.resultErrorMsg=t.reason,!1}));case 38:a.processIndex++;case 39:case"end":return n.stop()}}),l)})))()},handleSelectionChange:function(e){this.multipleSelection=e},importAddress:function(){var e=this;if(this.importText){this.loading.import=!0;var t=this.importText.split("\n");this.privateKeyObj=[];var a=1,n=new Promise((function(n){setTimeout((function(){var i,s=Object(l.a)(t);try{for(s.s();!(i=s.n()).done;){var r=i.value;try{var o=e.global.web3.eth.accounts.privateKeyToAccount(r,!0);e.privateKeyObj.push({address:o.address,id:a++,prv:r,nonce:0,balance:0,balanceStatus:0,resultStatus:0,resultErrorMsg:"",resultTx:""})}catch(e){}}}catch(e){s.e(e)}finally{s.f()}n()}),100)}));n.then((function(){e.loading.import=!1,e.$message.success(e.$t("success")),e.dialog.import=!1,e.getWeb3Balance(e.privateKeyObj)}))}else this.$message.error(this.$t("batchCollection.textNull"))},addtokenClosed:function(){this.importText=""},handleDelete:function(e,t){t.splice(e,1)},selectBalance:function(){this.getWeb3Balance(this.privateKeyObj)},getWeb3Balance:function(e){var t=this;if(e&&0!==e.length){this.loading.tableData=!0;var a=[];e.forEach((function(e){var n=e.address.replace("0x","");a.push({target:t.global.multicallAddress,callData:"0x4d2301cc000000000000000000000000".concat(n)})})),Object(m.d)(this.global.multicallAddress,a,this.global.web3).then((function(a){for(var n=0;n<e.length;n++){var l=t.global.web3.eth.abi.decodeParameter("uint256",a[n].returnData);e[n].balance=Object(s.e)(l),e[n].balanceStatus=1}})).finally((function(){t.loading.tableData=!1}))}},jumpTutorial:function(){window.open("https://docs.tokentools.app/multi/callabi","_blank")},jumpToken:function(){var e=this.$route.path,t=e.substring(e.lastIndexOf("/"));window.open("/oneToMore"+t,"_blank")},jumpCreateWallet:function(){var e=this.$route.path,t=e.substring(e.lastIndexOf("/"));window.open("/createWallet"+t,"_blank")},jumpCollection:function(){var e=this.$route.path,t=e.substring(e.lastIndexOf("/"));window.open("/batchCollection"+t,"_blank")},toggleSelection:function(e){var t=this;this.$refs.multipleTable.clearSelection(),e&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)}))},saveRpc:function(){var e=this;return Object(i.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading.rpc=!0,e.global.web3=new c.a(new c.a.providers.HttpProvider(e.global.rpcNode)),t.next=5,e.global.web3.eth.getChainId();case 5:e.global.provider=new g.a(e.global.rpcNode),e.loading.rpc=!1,e.dialog.rpc=!1,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),e.$message.error(t.t0.message),e.loading.rpc=!1;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},delSelect:function(){if(0!==this.$refs.multipleTable.selection.length){var e=this.$refs.multipleTable.selection.map((function(e){return e.id}));this.privateKeyObj=this.privateKeyObj.filter((function(t){return-1===e.indexOf(t.id)}))}else this.$message.error(this.$t("batchCollection.selectionTips"))},exportExcel:function(){var e=this;0!==this.$refs.multipleTable.selection.length?(this.loading.download=!0,Promise.all([a.e("chunk-5164a781"),a.e("chunk-19aba6d4")]).then(a.bind(null,"4bf8")).then((function(t){var a=["id","address","balance","tokenBalance","txId"],n=e.$refs.multipleTable.selection,l=e.formatJson(a,n),i=e.global.symbol+Object(s.o)(new Date,"{h}{i}{s}");t.export_json_to_excel({header:a,filename:i,data:l}),e.loading.download=!1}))):this.$message.error(this.$t("batchCollection.selectionTips"))},clipboardSuccess:function(){this.$message({message:this.$t("copySuccess"),type:"success",duration:1500})},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return"timestamp"===e?Object(s.o)(t[e]):t[e]}))}))},showDrawer:function(){0!==this.privateKeyObj.length?0!==this.$refs.multipleTable.selection.length?this.dialog.dialogShow=!0:this.$message.error(this.$t("batchCollection.selectionTips")):this.$message.error(this.$t("batchCallAbi.privateKeyObjNullTips"))},closeDrawer:function(){this.dialog.dialogShow=!1},initialData:function(){var e=this.$route.meta.chainId,t=Object(r.n)(e);this.global.symbol=t.symbol,this.global.chainId=t.chainId,this.global.baseUrl=t.blockExplorerUrls[0],this.global.rpcNode=t.rpcUrls[0],this.global.web3=new c.a(new c.a.providers.HttpProvider(t.rpcUrls[0])),this.global.provider=new g.a(t.rpcUrls[0]),this.global.multicallAddress=t.multicallAddress}},created:function(){this.initialData()}},w=v,x=(a("c168"),a("2877")),y=Object(x.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("batch-call-drawer",{attrs:{dialogShow:e.dialog.dialogShow,chainId:e.global.chainId,rpcNode:e.global.rpcNode,type:1},on:{confirmDrawer:e.confirmDrawer,closeDrawer:e.closeDrawer}}),t("div",{staticClass:"headerBox"},[t("div",{staticClass:"headerBg"},[t("h2",{on:{click:function(t){return e.jumpTutorial()}}},[e._v(e._s(e.$t("batchCallAbi.batchCallAbi"))),t("i",{staticClass:"el-icon-question tutorial"})]),e._m(0)])]),t("div",{staticClass:"content"},[t("el-row",{staticStyle:{"margin-bottom":"20px",padding:"0 12px"}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"operationBtn"},[t("div",[t("el-button",{staticClass:"btn",attrs:{size:"mobile"==e.device?"small":"medium",icon:"el-icon-bottom",type:"primary"},on:{click:function(t){e.dialog.import=!0}}},[e._v(e._s(e.$t("batchCollection.importAccount")))]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.download,expression:"loading.download"}],staticClass:"btn",attrs:{size:"mobile"==e.device?"small":"medium",icon:"el-icon-top",type:"primary"},on:{click:function(t){return e.exportExcel()}}},[e._v(e._s(e.$t("batchCollection.exportSelected")))]),t("el-button",{staticClass:"btn",attrs:{size:"mobile"==e.device?"small":"medium",icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.delSelect()}}},[e._v(e._s(e.$t("batchCollection.deleteSelected")))]),t("el-button",{staticClass:"btn",attrs:{size:"mobile"==e.device?"small":"medium",icon:"el-icon-setting",type:"primary"},on:{click:function(t){e.dialog.rpc=!0}}},[e._v(e._s(e.$t("batchCallAbi.setRpc")))])],1),t("el-dialog",{attrs:{title:"设置",visible:e.dialog.rpc,width:"mobile"==e.device?"100%":"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"rpc",t)}}},[t("span",[e._v(e._s(e.$t("batchTransfer.rpcUrl")))]),t("el-input",{attrs:{placeholder:"Please Input RPC Address"},model:{value:e.global.rpcNode,callback:function(t){e.$set(e.global,"rpcNode",t)},expression:"global.rpcNode"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog.rpc=!1}}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary",loading:e.loading.rpc},on:{click:function(t){return e.saveRpc()}}},[e._v(e._s(e.$t("confirm")))])],1)],1),t("div",[t("span",{staticClass:"btnText",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.jumpToken()}}},[e._v(e._s(e.$t("batchSwap.oneToMore")))]),t("span",{staticClass:"btnText",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.jumpCollection()}}},[e._v(e._s(e.$t("batchSwap.batchCollection")))]),t("span",{staticClass:"btnText",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.jumpCreateWallet()}}},[e._v(e._s(e.$t("batchSwap.batchCreateWallet")))])])],1),t("el-dialog",{attrs:{title:e.$t("batchCollection.importAddress"),visible:e.dialog.import,width:"mobile"===e.device?"100%":"600px"},on:{"update:visible":function(t){return e.$set(e.dialog,"import",t)},closed:function(t){return e.addtokenClosed()}}},[t("span",[e._v(e._s(e.$t("batchCollection.privateFormat")))]),t("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.import,expression:"loading.import"}],attrs:{type:"textarea",rows:10,placeholder:e.$t("batchCollection.privateFormat")},model:{value:e.importText,callback:function(t){e.importText=t},expression:"importText"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog.import=!1}}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary",loading:e.loading.import},on:{click:function(t){return e.importAddress()}}},[e._v(e._s(e.$t("confirm")))])],1)],1)],1)],1),t("el-row",{staticStyle:{"margin-bottom":"30px",padding:"0 12px"}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"transactionTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.tableData,expression:"loading.tableData"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"max-height":"500",data:e.privateKeyObj,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{prop:"address","min-width":"mobile"==e.device?150:340,label:e.$t("address")+" ("+e.addressCount+")",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{target:"_blank",href:e.global.baseUrl+"address/"+a.row.address}},[e._v(e._s(e.hiddenAddress(a.row.address)))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.address,expression:"scope.row.address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccess,expression:"clipboardSuccess",arg:"success"}],staticClass:"btn",attrs:{type:"text"}},[t("svg-icon",{attrs:{"icon-class":"copy"}})],1)]}}])}),t("el-table-column",{attrs:{prop:"balance",label:e.global.symbol+e.$t("batchCallAbi.balance"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.balanceStatus?t("el-alert",{staticStyle:{"line-height":"18px","font-size":"14px"},attrs:{title:e.$t("batchSwap.notSelect"),closable:!1,center:"",type:"info"}}):e._e(),1===a.row.balanceStatus?t("span",[e._v(" "+e._s(e.downFixed(a.row.balance,5))+" "),t("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}})]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"result",label:e.$t("batchSwap.runResult"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.resultStatus?t("el-alert",{staticStyle:{"line-height":"18px","font-size":"14px"},attrs:{closable:!1,title:e.$t("batchSwap.notRun"),center:"",type:"info"}}):e._e(),2!==a.row.resultStatus||a.row.resultTx?e._e():t("el-alert",{staticStyle:{"line-height":"18px","font-size":"14px"},attrs:{closable:!1,center:"",type:"info"}},[t("i",{staticClass:"el-icon-error",staticStyle:{color:"#c03639"}}),e._v(e._s(a.row.resultErrorMsg)+" ")]),2===a.row.resultStatus&&a.row.resultTx?t("el-link",{attrs:{target:"_blank",href:e.global.baseUrl+"tx/"+a.row.resultTx}},[e._v(" "+e._s(a.row.resultErrorMsg)+" "),t("i",{staticClass:"el-icon-success",staticStyle:{color:"#c03639"}})]):e._e(),1===a.row.resultStatus&&a.row.resultTx?t("el-link",{attrs:{target:"_blank",href:e.global.baseUrl+"tx/"+a.row.resultTx}},[e._v(" "+e._s(e.hiddenAddress(a.row.resultTx))+" "),t("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}})]):e._e()]}}])}),t("el-table-column",{attrs:{width:"100",label:e.$t("operate"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{content:e.$t("delete")}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.handleDelete(a.$index,e.privateKeyObj)}}})],1)]}}])})],1),t("div",{staticClass:"multipleBtn"},[t("el-button",{attrs:{size:"mobile"==e.device?"small":"medium",type:"primary",plain:""},on:{click:function(t){e.toggleSelection(e.privateKeyObj.filter((function(e){return e.tokenBalance<=0})))}}},[e._v(e._s(e.$t("batchCallAbi.selectTokenZero")))]),t("el-button",{attrs:{size:"mobile"==e.device?"small":"medium",type:"danger",plain:""},on:{click:function(t){e.toggleSelection(e.privateKeyObj.filter((function(e){return 2===e.resultStatus})))}}},[e._v(e._s(e.$t("batchCollection.selectDelete")))]),t("el-button",{attrs:{size:"mobile"==e.device?"small":"medium",type:"success",plain:""},on:{click:function(t){return e.selectBalance()}}},[e._v(e._s(e.$t("batchSwap.selectBalance")))]),t("span",{staticClass:"btnText",staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.$t("batchCallAbi.allBalance",[e.global.symbol]))+e._s(e.sunBalance))])],1)],1)])],1),t("div",{staticClass:"btnBox"},[t("el-button",{attrs:{loading:e.loading.call,type:"primary",size:"large"},on:{click:function(t){return e.showDrawer()}}},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"coin-collection"}}),t("span",[e._v(e._s(e.$t("batchCallAbi.runCallAbi")))])],1)],1),t("el-row",{staticStyle:{"margin-bottom":"30px",padding:"0 12px"}},[t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.loading.progressShow,expression:"loading.progressShow"}],attrs:{span:24}},[t("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.progress,status:"success"}})],1)],1)],1)],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"descBox"},[t("p",{staticClass:"desc"},[t("span",{staticClass:"label"},[e._v("Network supports:")]),t("span",{staticClass:"network"},[e._v("ETH, BSC, ARB, ETHW, HECO, OP, OKT, MATIC, FTM, KCC, XDAI, TRX, AVAX, SOL, CELO, MOVR, CRO, VLX, IOTX, SBCH, GLMR, SDN, XDC, FUSE, KLAY, ONE, EVMOS, BRISE, DOGECHAIN, ETC, SYSCOIN, CANTO...")])])])}],!1,null,"214f80d8",null);t.default=y.exports},c168:function(e,t,a){"use strict";a("0181")}}]);